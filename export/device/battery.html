<!DOCTYPE html>
<html data-bs-theme="light" lang="en" class="mdl-js">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>VINES - EMS</title>
    <link rel="stylesheet" href="../assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Be+Vietnam+Pro&amp;display=swap">
    <link rel="stylesheet" href="../assets/fonts/fontawesome-all.min.css">
    <link rel="stylesheet" href="../assets/css/ant-Design.css">
    <link rel="stylesheet" href="../assets/css/antd.min.css">
    <link rel="stylesheet" href="../assets/css/index-BIF2PrvO.css">
    <link rel="stylesheet" href="../assets/css/select2.css">
    <link rel="stylesheet" href="../assets/css/styles.css">
</head>

<body><noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root">
        <div class="ant-layout ant-es-layout css-xhucz1" style="min-height:100vh;">
            <header class="ant-layout-header css-xhucz1" style="padding: 0px;height: 69px;filter: brightness(115%) contrast(116%) grayscale(0%) hue-rotate(246deg) saturate(170%) sepia(0%);backdrop-filter: brightness(17%) contrast(103%) grayscale(2%) sepia(39%);-webkit-backdrop-filter: brightness(17%) contrast(103%) grayscale(2%) sepia(39%);width: 100%;margin-top: 0px;margin-right: 6px;margin-left: 0px;">
                <div class="logo-wrap" style="filter: grayscale(0%);margin-left: 2px;margin-bottom: 8px;"><a class="logo-link" href="../index.html" style="filter: brightness(120%);border-right-width: 3px;width: 87px;"><img src="../assets/img//logo-BKZrARYq.png" class="App-logo" alt="logo"></a><span class="head-title"><span class="small-title">VINFAST</span><span class="sub-title" style="filter: blur(0px) brightness(132%);">All Plants</span></span>
                    <div class="profile-section"><button type="button" class="ant-btn css-xhucz1 ant-btn-default ant-btn-icon-only hideOnDesktop toggle-btn"><span class="ant-btn-icon"><span role="img" aria-label="menu" class="anticon anticon-menu"><svg viewbox="64 64 896 896" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></span></button><a class="ant-dropdown-trigger">
                            <div class="ant-space css-xhucz1 ant-space-horizontal ant-space-align-center ant-space-gap-row-small ant-space-gap-col-small">
                                <div class="ant-space-item"><i class="far fa-user"></i></div>
                            </div>
                        </a></div>
                </div>
            </header>
            <div class="d-flex ant-layout ant-layout-has-sider css-xhucz1" style="border-left-width: 0px;border-left-style: solid;">
                <aside class="ant-layout-sider ant-layout-sider-light ant-layout-sider-has-trigger hideOnMobile" style="flex: 0 0 269px;max-width: 269px;min-width: 269px;">
                    <div class="ant-layout-sider-children">
                        <div class="logo-slogan" style="filter: brightness(1%);border-color: var(--bs-emphasis-color);border-right-width: 12px;border-right-color: var(--bs-emphasis-color);border-bottom: 1px double var(--bs-body-bg) ;"><span class="minimal-text">EMS</span><span class="large-text">Energy Management System</span></div>
                        <ul class="ant-menu ant-menu-root ant-menu-inline ant-menu-light css-xhucz1" role="menu" tabindex="0" data-menu-list="true">
                            <li role="presentation" class="ant-menu-item-group" style="font-size: 14px;padding-top: 0px;padding-right: 0px;">
                                <div role="presentation" class="ant-menu-item-group-title" title="ESS Management" style="font-size: 11px;"><span> ESS Management </span></div>
                                <ul class="list-unstyled ant-menu-item-group-list" role="group">
                                    <li class="ant-menu-item ant-menu-item-selected ant-menu-item-only-child" role="menuitem" tabindex="-1" data-menu-id="rc-menu-uuid-07982-1-/ess" style="padding-left: 24px;font-family: 'Be Vietnam Pro', sans-serif;color: var(--bs-highlight-color);margin-bottom: 8px;"><span class="ant-menu-title-content"><a href="/ess"><span style="color: rgb(3, 3, 33);">ESS list</span></a></span></li>
                                    <li class="ant-menu-item ant-menu-item-only-child" role="menuitem" tabindex="-1" data-menu-id="rc-menu-uuid-07982-1-/device" style="padding-left: 24px;font-family: 'Be Vietnam Pro', sans-serif;color: var(--bs-emphasis-color);"><span class="ant-menu-title-content"><a href="/device"><span style="color: rgb(3, 3, 33);">Device list</span></a></span></li>
                                </ul>
                            </li>
                            <li role="presentation" class="ant-menu-item-group">
                                <div role="presentation" class="ant-menu-item-group-title" title="Plant Management"><span style="font-size: 11px;"> Plant Management </span></div>
                                <ul class="list-unstyled ant-menu-item-group-list" role="group">
                                    <li class="ant-menu-item ant-menu-item-only-child" role="menuitem" tabindex="-1" data-menu-id="rc-menu-uuid-07982-1-/plant" style="padding-left: 24px;font-family: 'Be Vietnam Pro', sans-serif;color: var(--bs-emphasis-color);"><span class="ant-menu-title-content"><a href="/plant"><span style="color: rgb(17, 17, 17);">Plant list</span></a></span></li>
                                </ul>
                            </li>
                            <li role="presentation" class="ant-menu-item-group">
                                <div role="presentation" class="ant-menu-item-group-title" title="User Management"><span style="font-size: 11px;"> User Management </span></div>
                                <ul class="list-unstyled ant-menu-item-group-list" role="group">
                                    <li class="ant-menu-item ant-menu-item-only-child" role="menuitem" tabindex="-1" data-menu-id="rc-menu-uuid-07982-1-/user" style="padding-left: 24px;font-family: 'Be Vietnam Pro', sans-serif;color: var(--bs-emphasis-color);margin-bottom: 8px;"><span class="ant-menu-title-content" style="margin-bottom: 6px;"><a href="/user"><span style="color: rgb(3, 3, 33);">User list</span></a></span></li>
                                    <li class="ant-menu-item ant-menu-item-only-child" role="menuitem" tabindex="-1" data-menu-id="rc-menu-uuid-07982-1-/customer" style="padding-left: 24px;font-family: 'Be Vietnam Pro', sans-serif;color: var(--bs-emphasis-color);"><span class="ant-menu-title-content"><a href="/customer"><span style="color: rgb(3, 3, 33);">Business user</span></a></span></li>
                                </ul>
                            </li>
                            <li role="presentation" class="ant-menu-item-group">
                                <div role="presentation" class="ant-menu-item-group-title" title="Pricing Management"><span style="font-size: 11px;"> Pricing Management </span></div>
                                <ul class="list-unstyled ant-menu-item-group-list" role="group">
                                    <li class="ant-menu-item ant-menu-item-only-child" role="menuitem" tabindex="-1" data-menu-id="rc-menu-uuid-07982-1-/pricing" style="padding-left: 24px;font-family: 'Be Vietnam Pro', sans-serif;color: var(--bs-emphasis-color);"><span class="ant-menu-title-content"><a href="/pricing"><span style="color: rgb(3, 3, 33);">Pricing policy</span></a></span></li>
                                </ul>
                            </li>
                            <li role="presentation" class="ant-menu-item-group">
                                <div role="presentation" class="ant-menu-item-group-title" title="FOTA"><span style="font-size: 11px;"> FOTA </span></div>
                                <ul class="list-unstyled ant-menu-item-group-list" role="group">
                                    <li class="ant-menu-item ant-menu-item-only-child" role="menuitem" tabindex="-1" data-menu-id="rc-menu-uuid-07982-1-/firmware" style="padding-left: 24px;font-family: 'Be Vietnam Pro', sans-serif;color: var(--bs-emphasis-color);"><span class="ant-menu-title-content"><a href="/firmware"><span style="color: rgb(3, 3, 33);">Firmware list</span></a></span></li>
                                </ul>
                            </li>
                        </ul>
                        <div aria-hidden="true" style="display:none;"></div>
                    </div>
                </aside>
                <main class="ant-layout-content css-xhucz1" style="margin:0px 12px;">
                    <nav class="ant-breadcrumb ant-breadcrumb5"><a href="/"><span>ESS Management</span></a><span class="breadcumb-splash">/</span><a aria-current="page" class="active" href="/ess"><span>ESS List</span></a><span class="breadcumb-splash">/</span><a aria-current="page" class="active" href="/ess/9e858157-2597-4c01-a754-76b2df7d5b5e"><span>ESS Details</span></a><span class="breadcumb-splash">/</span><a aria-current="page" class="active" href="/ess/9e858157-2597-4c01-a754-76b2df7d5b5e/device"><span>Device</span></a><span class="breadcumb-splash">/</span><a aria-current="page" class="active" href="/ess/9e858157-2597-4c01-a754-76b2df7d5b5e/device/482ec7cf-79b8-457f-9f7e-457f7192dcbc"><span>482ec7cf 79b8 457f 9f7e 457f7192dcbc</span></a></nav>
                    <div style="background:rgb(255, 255, 255);">
                        <div class="ant-spin-nested-loading css-xhucz1">
                            <div class="ant-spin-container">
                                <div class="page-container" style="margin-top:35px;">
                                    <h2 class="page-title page-title-detail"><div class="page-title-main"><a class="back-btn"><img src = "../assets/img/back.svg"class="back" alt="back"></a>ESS - Beta - Battery            </div><div class="page-title-r"><div class="ant-space-compact css-xhucz1 ant-space-compact-block ant-dropdown-button dropdown-btn dropdown-btn-onboard"><button type="button" class="ant-btn css-xhucz1 ant-btn-primary ant-btn-compact-item ant-btn-compact-first-item"><span role="img" aria-label="check" class="anticon anticon-check"><svg viewbox="64 64 896 896" data-icon="check" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"></path></svg></span><span>Onboarded</span></button><button type="button" class="ant-btn css-xhucz1 ant-btn-primary ant-btn-icon-only ant-btn-compact-item ant-btn-compact-last-item ant-dropdown-trigger"><span class="ant-btn-icon"><span role="img" aria-label="caret-down" class="anticon anticon-caret-down"><svg viewbox="0 0 1024 1024" data-icon="caret-down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"></path></svg></span></span></button></div></div></h2>
                                    <div class="page-content">
                                        <div class="card-wrap card-wrap-ess-device">
                                            <div class="card-item">
                                                <div class="card-item-title"><span>Type</span></div>
                                                <div class="card-item-value"><span>Battery Pack</span></div>
                                            </div>
                                            <div class="card-item">
                                                <div class="card-item-title"><span>Status</span></div>
                                                <div class="card-item-value">
                                                    <div class="card-status card-status-Enable"><span>Online</span></div>
                                                </div>
                                            </div>
                                            <div class="card-item">
                                                <div class="card-item-title"><span>ID</span></div>
                                                <div class="card-item-value"><span> 482ec7cf-79b8-457f-9f7e-457f7192dcbc </span></div>
                                            </div>
                                            <div class="card-item">
                                                <div class="card-item-title"><span>Serial</span></div>
                                                <div class="card-item-value"><span>0</span></div>
                                            </div>
                                            <div class="card-item">
                                                <div class="card-item-title"><span>ESS Name</span></div>
                                                <div class="card-item-value"><span>VES000000022308008</span></div>
                                            </div>
                                        </div>
                                        <div class="ant-tabs ant-tabs-top detail-tabs css-xhucz1">
                                            <div role="tablist" class="ant-tabs-nav">
                                                <div class="ant-tabs-nav-wrap">
                                                    <div class="ant-tabs-nav-list" style="transform:translate(0px, 0px);">
                                                        <div data-node-key="Live statistics" class="ant-tabs-tab ant-tabs-tab-active">
                                                            <div role="tab" aria-selected="true" id="rc-tabs-11-tab-Live statistics" class="ant-tabs-tab-btn" aria-controls="rc-tabs-11-panel-Live statistics" tabindex="0"><span> Live statistics </span></div>
                                                        </div>
                                                        <div data-node-key="History Data" class="ant-tabs-tab">
                                                            <div role="tab" aria-selected="false" id="rc-tabs-11-tab-History Data" class="ant-tabs-tab-btn" aria-controls="rc-tabs-11-panel-History Data" tabindex="0"><span> History Data </span></div>
                                                        </div>
                                                        <div data-node-key="General information" class="ant-tabs-tab">
                                                            <div role="tab" aria-selected="false" id="rc-tabs-11-tab-General information" class="ant-tabs-tab-btn" aria-controls="rc-tabs-11-panel-General information" tabindex="0"><span> General information </span></div>
                                                        </div>
                                                        <div class="ant-tabs-ink-bar ant-tabs-ink-bar-animated" style="width:96.75px;left:48.375px;transform:translateX(-50%);"></div>
                                                    </div>
                                                </div>
                                                <div class="ant-tabs-nav-operations ant-tabs-nav-operations-hidden"><button type="button" class="ant-tabs-nav-more" tabindex="-1" aria-hidden="true" aria-haspopup="listbox" aria-controls="rc-tabs-11-more-popup" id="rc-tabs-11-more" aria-expanded="false" style="visibility:hidden;order:1;"><span role="img" aria-label="ellipsis" class="anticon anticon-ellipsis"><svg viewbox="64 64 896 896" data-icon="ellipsis" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"></path></svg></span></button></div>
                                            </div>
                                            <div class="ant-tabs-content-holder">
                                                <div class="ant-tabs-content ant-tabs-content-top">
                                                    <div id="rc-tabs-11-panel-Live statistics" role="tabpanel" tabindex="0" aria-labelledby="rc-tabs-11-tab-Live statistics" aria-hidden="false" class="ant-tabs-tabpane ant-tabs-tabpane-active">
                                                        <div class="page-container">
                                                            <div class="statistic-section mb-10">
                                                                <div class="statistic-section-label"><span> POWER &amp; ENERGY </span></div>
                                                                <div class="statistic-item-wrap">
                                                                    <div class="statistic-item">
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> Battery rack current </span></div>
                                                                            <div class="statistic-sub-value"><span> 0 </span><span class="statistic-sub-unit">A</span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> Battery rack voltage </span></div>
                                                                            <div class="statistic-sub-value"><span> 479.7 </span><span class="statistic-sub-unit">V</span></div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="statistic-item">
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> Battery rack Charge power </span></div>
                                                                            <div class="statistic-sub-value"><span> 0 </span><span class="statistic-sub-unit">kW</span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> Battery rack DisCharge power </span></div>
                                                                            <div class="statistic-sub-value"><span> 0 </span><span class="statistic-sub-unit">kW</span></div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="statistic-item">
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> Total Battery Charge Energy of life cycle </span></div>
                                                                            <div class="statistic-sub-value"><span> 1654.1 </span><span class="statistic-sub-unit">kWh</span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> Total Battery Discharge Energy of life cycle </span></div>
                                                                            <div class="statistic-sub-value"><span> 1361.3 </span><span class="statistic-sub-unit">kWh</span></div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="ant-divider css-xhucz1 ant-divider-horizontal" role="separator" style="margin:8px 0px;"></div>
                                                            <div class="statistic-section mb-10">
                                                                <div class="statistic-section-label"><span> STATUSES &amp; ERRORS </span></div>
                                                                <div class="statistic-item-wrap">
                                                                    <div class="statistic-item">
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> HV Status of Rack </span></div>
                                                                            <div class="statistic-sub-value"><span> HV ON </span><span class="statistic-sub-unit"></span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> Battery error level </span></div>
                                                                            <div class="statistic-sub-value"><span> No warning </span><span class="statistic-sub-unit"></span></div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="statistic-item"></div>
                                                                    <div class="statistic-item">
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> Positive contactor status </span></div>
                                                                            <div class="statistic-sub-value"><span> Closed </span><span class="statistic-sub-unit"></span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> Negative contactor status </span></div>
                                                                            <div class="statistic-sub-value"><span> Closed </span><span class="statistic-sub-unit"></span></div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="ant-divider css-xhucz1 ant-divider-horizontal" role="separator" style="margin:8px 0px;"></div>
                                                            <div class="statistic-section mb-10">
                                                                <div class="statistic-section-label"><span> OTHER STATISTICS </span></div>
                                                                <div class="statistic-item-wrap">
                                                                    <div class="statistic-item">
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> Lowest cell voltage </span></div>
                                                                            <div class="statistic-sub-value"><span> 3.331 </span><span class="statistic-sub-unit">V</span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> Highest cell voltage </span></div>
                                                                            <div class="statistic-sub-value"><span> 3.332 </span><span class="statistic-sub-unit">V</span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> Min cell temperature </span></div>
                                                                            <div class="statistic-sub-value"><span> 29 </span><span class="statistic-sub-unit">°C</span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> Max cell temperature </span></div>
                                                                            <div class="statistic-sub-value"><span> 30 </span><span class="statistic-sub-unit">°C</span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> Average temperature of rack </span></div>
                                                                            <div class="statistic-sub-value"><span> 29 </span><span class="statistic-sub-unit">°C</span></div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="statistic-item">
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> ID of lowest cell voltage </span></div>
                                                                            <div class="statistic-sub-value"><span> 19 </span><span class="statistic-sub-unit"></span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> ID of highest cell voltage </span></div>
                                                                            <div class="statistic-sub-value"><span> 7 </span><span class="statistic-sub-unit"></span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> ID of min cell temperature </span></div>
                                                                            <div class="statistic-sub-value"><span> 8 </span><span class="statistic-sub-unit"></span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> ID of max cell temperature </span></div>
                                                                            <div class="statistic-sub-value"><span> 31 </span><span class="statistic-sub-unit"></span></div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="statistic-item">
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span>SoC of rack</span></div>
                                                                            <div class="statistic-sub-value"><span> 95 </span><span class="statistic-sub-unit">%</span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span>SoH of rack</span></div>
                                                                            <div class="statistic-sub-value"><span> 90.5 </span><span class="statistic-sub-unit">%</span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> DC insulation resistance </span></div>
                                                                            <div class="statistic-sub-value"><span> 7938 </span><span class="statistic-sub-unit">KΩ</span></div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="ant-tabs-content-holder">
                                                <div class="ant-tabs-content ant-tabs-content-top">
                                                    <div id="rc-tabs-22-panel-Live statistics" role="tabpanel" tabindex="-1" aria-labelledby="rc-tabs-22-tab-Live statistics" aria-hidden="true" class="ant-tabs-tabpane ant-tabs-tabpane-hidden">
                                                        <div class="page-container">
                                                            <div class="statistic-section mb-10">
                                                                <div class="statistic-section-label"><span>POWER &amp; ENERGY</span></div>
                                                                <div class="statistic-item-wrap">
                                                                    <div class="statistic-item">
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span>Battery rack current</span></div>
                                                                            <div class="statistic-sub-value"><span> 0 </span><span class="statistic-sub-unit">A</span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span>Battery rack voltage</span></div>
                                                                            <div class="statistic-sub-value"><span> 479.4 </span><span class="statistic-sub-unit">V</span></div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="statistic-item">
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span>Battery rack Charge power</span></div>
                                                                            <div class="statistic-sub-value"><span> 0 </span><span class="statistic-sub-unit">kW</span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> Battery rack DisCharge power </span></div>
                                                                            <div class="statistic-sub-value"><span> 0 </span><span class="statistic-sub-unit">kW</span></div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="statistic-item">
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> Total Battery Charge Energy of life cycle </span></div>
                                                                            <div class="statistic-sub-value"><span> 1654.1 </span><span class="statistic-sub-unit">kWh</span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> Total Battery Discharge Energy of life cycle </span></div>
                                                                            <div class="statistic-sub-value"><span> 1361.3 </span><span class="statistic-sub-unit">kWh</span></div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="ant-divider css-xhucz1 ant-divider-horizontal" role="separator" style="margin:8px 0px;"></div>
                                                            <div class="statistic-section mb-10">
                                                                <div class="statistic-section-label"><span>STATUSES &amp; ERRORS</span></div>
                                                                <div class="statistic-item-wrap">
                                                                    <div class="statistic-item">
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span>HV Status of Rack</span></div>
                                                                            <div class="statistic-sub-value"><span> HV ON </span><span class="statistic-sub-unit"></span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span>Battery error level</span></div>
                                                                            <div class="statistic-sub-value"><span> No warning </span><span class="statistic-sub-unit"></span></div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="statistic-item"></div>
                                                                    <div class="statistic-item">
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span>Positive contactor status</span></div>
                                                                            <div class="statistic-sub-value"><span> Closed </span><span class="statistic-sub-unit"></span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span>Negative contactor status</span></div>
                                                                            <div class="statistic-sub-value"><span> Closed </span><span class="statistic-sub-unit"></span></div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="ant-divider css-xhucz1 ant-divider-horizontal" role="separator" style="margin:8px 0px;"></div>
                                                            <div class="statistic-section mb-10">
                                                                <div class="statistic-section-label"><span>OTHER STATISTICS</span></div>
                                                                <div class="statistic-item-wrap">
                                                                    <div class="statistic-item">
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span>Lowest cell voltage</span></div>
                                                                            <div class="statistic-sub-value"><span> 3.331 </span><span class="statistic-sub-unit">V</span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span>Highest cell voltage</span></div>
                                                                            <div class="statistic-sub-value"><span> 3.332 </span><span class="statistic-sub-unit">V</span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span>Min cell temperature</span></div>
                                                                            <div class="statistic-sub-value"><span> 29 </span><span class="statistic-sub-unit">°C</span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span>Max cell temperature</span></div>
                                                                            <div class="statistic-sub-value"><span> 30 </span><span class="statistic-sub-unit">°C</span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> Average temperature of rack </span></div>
                                                                            <div class="statistic-sub-value"><span> 29 </span><span class="statistic-sub-unit">°C</span></div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="statistic-item">
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span>ID of lowest cell voltage</span></div>
                                                                            <div class="statistic-sub-value"><span> 19 </span><span class="statistic-sub-unit"></span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> ID of highest cell voltage </span></div>
                                                                            <div class="statistic-sub-value"><span> 7 </span><span class="statistic-sub-unit"></span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> ID of min cell temperature </span></div>
                                                                            <div class="statistic-sub-value"><span> 8 </span><span class="statistic-sub-unit"></span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span> ID of max cell temperature </span></div>
                                                                            <div class="statistic-sub-value"><span> 31 </span><span class="statistic-sub-unit"></span></div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="statistic-item">
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span>SoC of rack</span></div>
                                                                            <div class="statistic-sub-value"><span> 95 </span><span class="statistic-sub-unit">%</span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span>SoH of rack</span></div>
                                                                            <div class="statistic-sub-value"><span> 90.5 </span><span class="statistic-sub-unit">%</span></div>
                                                                        </div>
                                                                        <div class="statistic-sub-item">
                                                                            <div class="statistic-sub-title"><span>DC insulation resistance</span></div>
                                                                            <div class="statistic-sub-value"><span> 7903 </span><span class="statistic-sub-unit">KΩ</span></div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div id="rc-tabs-22-panel-History Data" role="tabpanel" tabindex="0" aria-labelledby="rc-tabs-22-tab-History Data" aria-hidden="false" class="ant-tabs-tabpane ant-tabs-tabpane-active">
                                                        <form class="ant-form ant-form-vertical css-xhucz1">
                                                            <div class="ant-row css-xhucz1">
                                                                <div class="ant-col ant-col-10 css-xhucz1" style="flex-direction:column;">
                                                                    <div class="ant-form-item css-xhucz1">
                                                                        <div class="ant-row ant-form-item-row css-xhucz1">
                                                                            <div class="ant-col ant-form-item-label css-xhucz1"><label for="parameters" title=""><strong>Select parameters</strong></label></div>
                                                                            <div class="ant-col ant-form-item-control css-xhucz1">
                                                                                <div class="ant-form-item-control-input">
                                                                                    <div class="ant-form-item-control-input-content">
                                                                                        <div class="ant-select ant-select-outlined ant-select-in-form-item css-xhucz1 ant-select-multiple ant-select-allow-clear ant-select-show-arrow ant-select-show-search" style="width:100%;">
                                                                                            <div class="ant-select-selector">
                                                                                                <div class="ant-select-selection-overflow">
                                                                                                    <div class="ant-select-selection-overflow-item" style="opacity:1;"><span title="Battery rack Charge power (kW)" class="ant-select-selection-item"><span class="ant-select-selection-item-content">Battery rack Charge power (kW)</span><span class="ant-select-selection-item-remove" aria-hidden="true" style="user-select:none;"><span role="img" aria-label="close" class="anticon anticon-close"><svg fill-rule="evenodd" viewbox="64 64 896 896" data-icon="close" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"></path></svg></span></span></span></div>
                                                                                                    <div class="ant-select-selection-overflow-item" style="opacity:1;"><span title="Battery rack DisCharge power (kW)" class="ant-select-selection-item"><span class="ant-select-selection-item-content">Battery rack DisCharge power (kW)</span><span class="ant-select-selection-item-remove" aria-hidden="true" style="user-select:none;"><span role="img" aria-label="close" class="anticon anticon-close"><svg fill-rule="evenodd" viewbox="64 64 896 896" data-icon="close" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"></path></svg></span></span></span></div>
                                                                                                    <div class="ant-select-selection-overflow-item ant-select-selection-overflow-item-suffix" style="opacity:1;">
                                                                                                        <div class="ant-select-selection-search" style="width:4px;"><input type="search" aria-autocomplete="list" aria-controls="parameters_list" aria-expanded="false" aria-haspopup="listbox" aria-owns="parameters_list" autocomplete="off" class="ant-select-selection-search-input" id="parameters" readonly="" role="combobox" style="opacity:0;" value=""><span class="ant-select-selection-search-mirror" aria-hidden="true"></span></div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div><span class="ant-select-arrow" aria-hidden="true" style="user-select:none;"><span role="img" aria-label="down" class="anticon anticon-down ant-select-suffix"><svg viewbox="64 64 896 896" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></span></span><span class="ant-select-clear" aria-hidden="true" style="user-select:none;"><span role="img" aria-label="close-circle" class="anticon anticon-close-circle"><svg fill-rule="evenodd" viewbox="64 64 896 896" data-icon="close-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"></path></svg></span></span>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="ant-col css-xhucz1" style="flex:0 0 36px;"></div>
                                                                <div class="ant-col css-xhucz1" style="flex:0 0 290px;flex-direction:column;">
                                                                    <div style="padding-bottom:8px;"><strong>Select date</strong></div>
                                                                    <div class="ant-space css-xhucz1 ant-space-horizontal ant-space-align-center ant-space-gap-row-small ant-space-gap-col-small" style="display:flex;align-items:flex-start;">
                                                                        <div class="ant-space-item">
                                                                            <div class="ant-form-item css-xhucz1">
                                                                                <div class="ant-row ant-form-item-row css-xhucz1">
                                                                                    <div class="ant-col ant-form-item-control css-xhucz1">
                                                                                        <div class="ant-form-item-control-input">
                                                                                            <div class="ant-form-item-control-input-content">
                                                                                                <div class="ant-picker ant-picker-outlined css-xhucz1" style="width:100%;height:auto;">
                                                                                                    <div class="ant-picker-input"><input aria-invalid="false" autocomplete="off" aria-required="true" size="12" id="selectedTime" placeholder="Select date" value="2024-10-11"><span class="ant-picker-suffix"><span role="img" aria-label="calendar" class="anticon anticon-calendar"><svg viewbox="64 64 896 896" data-icon="calendar" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"></path></svg></span></span><span class="ant-picker-clear" role="button"><span role="img" aria-label="close-circle" class="anticon anticon-close-circle"><svg fill-rule="evenodd" viewbox="64 64 896 896" data-icon="close-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"></path></svg></span></span></div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="ant-col css-xhucz1" style="flex:1 1 auto;display:flex;align-items:center;"><button type="submit" class="ant-btn css-xhucz1 ant-btn-primary"><span>Get data</span></button></div>
                                                                <form class="ant-form ant-form-vertical css-xhucz1">
                                                                    <div class="d-block ant-row css-xhucz1">
                                                                        <div class="d-flex justify-content-start ant-col ant-col-12 css-xhucz1" style="display:flex;justify-content:flex-end;">
                                                                            <div class="ant-form-item css-xhucz1" style="margin-bottom:0px;">
                                                                                <div class="ant-row ant-form-item-row css-xhucz1">
                                                                                    <div class="ant-col ant-form-item-control css-xhucz1">
                                                                                        <div class="ant-form-item-control-input">
                                                                                            <div class="ant-form-item-control-input-content">
                                                                                                <div class="ant-picker ant-picker-outlined css-xhucz1" style="width:100%;height:auto;">
                                                                                                    <div class="ant-picker-input"><input type="datetime-local" id="datetimeInput" />

<!-- <input aria-invalid="false" autocomplete="off" aria-required="true" size="12" id="selectedTime" placeholder="Select date" value="2024-10-02"> --><span class="ant-picker-suffix"><span role="img" aria-label="calendar" class="anticon anticon-calendar"><svg viewbox="64 64 896 896" data-icon="calendar" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"></path></svg></span></span><span class="ant-picker-clear" role="button"><span role="img" aria-label="close-circle" class="anticon anticon-close-circle"><svg fill-rule="evenodd" viewbox="64 64 896 896" data-icon="close-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"></path></svg></span></span></div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div><button><span>Get data</span></button><button class="btn btn-primary" id="bat_get_time" type="button">Button</button>
                                                                        </div>
                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </form>
                                                        <div style="padding:20px;box-shadow:rgba(0, 0, 0, 0.08) 0px 0px 8px;border-radius:8px;">
                                                            <div class="ant-row css-xhucz1">
                                                                <div class="ant-col css-xhucz1" style="flex:1 1 auto;display:flex;align-items:center;justify-content:center;"><strong>Oct 11,2024 00:00 - Oct 11,2024 23:59</strong></div>
                                                            </div><br>
                                                            <div style="height:inherit;" data-chart-source-type="G2Plot">
                                                                <div style="position:relative;"><head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Line Chart</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f6f9;
    }

    /* Chart container styling */
    #line-chart {
      width: 100%;
      height: 500px;
    }

    h1 {
      text-align: center;
      color: #333;
    }

    /* Legend styling */
    #legend {
      display: flex;
      justify-content: center;
      flex-direction: column;
      margin: 10px 0;
    }

    .legend-item {
      margin: 0 15px;
      font-size: 16px;
      cursor: pointer; /* Change cursor to pointer */
      transition: opacity 0.3s ease; /* Smooth transition for opacity */
    }

    .color-box {
      display: inline-block;
      width: 12px;
      height: 12px;
      margin-right: 5px;
    }

    .disabled {
      opacity: 0.5; /* Make legend item semi-transparent */
    }
  </style>

  <!-- Include Lightweight Charts library -->
  <script src="/assets/js/lightweight-charts.standalone.production.js"></script>
</head>
<body>
  <h1>Line Chart</h1>

  <!-- Chart container -->
  <div id="line-chart"></div>

  <!-- Legend container -->
  <div id="legend"></div>

  <script>
    // Get chart container element
    const chartElement = document.getElementById("line-chart");

    // Initialize the chart
    const chart = LightweightCharts.createChart(chartElement, {
      width: chartElement.clientWidth, // Get the width of the container
      height: 500, // Set fixed height
      layout: {
        backgroundColor: "#ffffff",
        textColor: "#000000",
      },
      grid: {
        vertLines: {
          color: "#e1e1e1",
        },
        horzLines: {
          color: "#e1e1e1",
        },
      },
      priceScale: {
        borderColor: "#e1e1e1",
      },
      timeScale: {
        borderColor: "#e1e1e1",
        timeVisible: true,
        secondsVisible: true,
      },
      crosshair: {
        mode: LightweightCharts.CrosshairMode.Normal,
      },
    });

    let currentTime = Date.now();
    let lineSeriesMap = {};
    // Function to generate random colors for each line series
    function getRandomColor() {
      const letters = "0123456789ABCDEF";
      let color = "#";
      for (let i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
      }
      return color;
    }

    // Function to create a new series and simultaneously create a legend for it
    function createChartSeries(key) {
      const color = getRandomColor();

      // Create a new series
      const series = chart.addLineSeries({
        color: color,
        lineWidth: 2,
      });
      const seriesMap = {
        data: [],
        series: series,
        isChartVisible: true,
      };
      // Format the key: replace "_" with spaces and capitalize each word
      const formattedKey = key
        .replace(/_/g, " ") // Replace underscores with spaces
        .replace(/\b\w/g, (char) => char.toUpperCase()); // Capitalize the first letter of each word

      // Create a new legend item
      const legendItem = document.createElement("div");
      legendItem.classList.add("legend-item");
      legendItem.innerHTML = `
      <span class="color-box" style="background-color: ${color};"></span>
      ${formattedKey}
    `;

      // Add click event to show/hide the series data
      let isVisible = true; // Current visibility state of the series
      seriesMap.isChartVisible = isVisible;
      legendItem.addEventListener("click", () => {
        isVisible = !isVisible; // Toggle visibility state
        seriesMap.isChartVisible = isVisible;
        if (isVisible) {
          seriesMap.series.setData(lineSeriesMap[key].data); // Show the data again
          legendItem.classList.remove("disabled"); // Remove the dimmed state
        } else {
          seriesMap.series.setData([]); // Hide the data
          legendItem.classList.add("disabled"); // Add the dimmed state
        }
      });

      // Add the new legend item to the DOM (assuming you have a container for the legend with id #legend)
      document.getElementById("legend").appendChild(legendItem);

      // Return the created seriesMap
      return seriesMap;
    }

    // Function to get current time in Unix timestamp
    function getCurrentUnixTime() {
      return Math.floor(Date.now() / 1000); // Get Unix timestamp (seconds)
      //currentTime += 1 * 1000;
      return currentTime;
    }

    // Function to generate a new data point for Charge Power
    // function generateNewChargeDataPoint() {
    //   return Math.random() * 100; // Generate a random value
    // }
    let time = 0;
    function generateNewChargeDataPoint() {
      const amplitude = 50;
      const offset = 50;
      const frequency = 0.1;

      const sinValue = amplitude * Math.sin(frequency * time) + offset;

      time += 1;

      return sinValue;
    }

    // Function to generate a new data point for Discharge Power
    function generateNewDischargeDataPoint() {
      const currentTime = getCurrentUnixTime();
      const newValue = Math.random() * 150; // Generate a random value for discharge
      return { time: currentTime, value: newValue };
    }

    // Function to save data to the database
    function saveDataToDatabase(time, charge_power, discharge_power) {
      fetch("/api/save-data", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          time: time,
          charge_power: charge_power,
          discharge_power: discharge_power,
        }),
      })
        .then((response) => response.json())
        .then((data) => {})
        .catch((error) => {
          console.error("Error saving data:", error);
        });
    }
    function saveBatteryDataToDatabase(batteryData) {
      fetch("/api/save-batterydata", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          batteryData,
        }),
      })
        .then((response) => {
          if (!response.ok) {
            throw new Error("Failed to save data");
          }
          return response.json();
        })
        .then((data) => {})
        .catch((error) => {
          console.error("Error saving data:", error);
        });
    }
    // Function to fetch data from the database
    function fetchDataFromDatabase() {
      fetch("/api/get-batterydata")
        .then((response) => response.json())
        .then((data) => {
          // Initialize previous time for charge and discharge series
          let previousTime = 0;
          const keys = Object.keys(data[0]); // Get all column names dynamically
          let dataChart = {};

          keys.forEach((key) => {
            if (key !== "time" && key !== "id") {
              // Exclude 'time' from variables to plot
              if (!lineSeriesMap[key]) {
                lineSeriesMap[key] = createChartSeries(key);
              }
              previousTime = 0;
              dataChart[key] = data
                .filter((item, index) => {
                  const isValid =
                    item.time != null && // Ensure time is not null
                    item[key] != null && // Ensure discharge power is not null
                    typeof item[key] === "number" && // Ensure discharge power is a valid number
                    item.time > previousTime; // Ensure time is increasing

                  if (isValid) {
                    previousTime = item.time; // Update previous valid time
                    return true; // Include this valid item
                  } else {
                    return false; // Skip this invalid item
                  }
                })
                .map((item) => ({
                  time: item.time,
                  value: item[key],
                }));
              // Use spread operator to push each element
              lineSeriesMap[key].data.push(...dataChart[key]);

              if (lineSeriesMap[key].isChartVisible) {
                console.log("lineSeriesMap[key].data", lineSeriesMap[key].data);
                lineSeriesMap[key].series.setData(lineSeriesMap[key].data); // push data to chart
              }
            }
          });
        })
        .catch((error) => {
          console.error("Error fetching data:", error);
        });
    }
    function fetchChangedDataFromDatabase() {
      fetch("/api/get-changed-batterydata")
        .then((response) => response.json())
        .then((data) => {
          console.log(data);
          if (data.length > 0) {
            // Initialize previous time for charge and discharge series
            let previousTime = 0;
            const keys = Object.keys(data[0]); // Get all column names dynamically
            let dataChart = {};

            keys.forEach((key) => {
              if (key !== "time" && key !== "id") {
                // Exclude 'time' from variables to plot
                if (!lineSeriesMap[key]) {
                  lineSeriesMap[key] = createChartSeries(key);
                }
                previousTime = 0;
                dataChart[key] = data
                  .filter((item, index) => {
                    const isValid =
                      item.time != null && // Ensure time is not null
                      item[key] != null && // Ensure discharge power is not null
                      typeof item[key] === "number" && // Ensure discharge power is a valid number
                      item.time > previousTime; // Ensure time is increasing

                    if (isValid) {
                      previousTime = item.time; // Update previous valid time
                      return true; // Include this valid item
                    } else {
                      return false; // Skip this invalid item
                    }
                  })
                  .map((item) => ({
                    time: item.time,
                    value: item[key],
                  }));
                lineSeriesMap[key].data.push(...dataChart[key]);

                if (lineSeriesMap[key].isChartVisible) {
                  if (dataChart[key] !== null && dataChart[key] !== undefined) {
                    dataChart[key].forEach((point) => {
                      lineSeriesMap[key].series.update({
                        time: point.time,
                        value: point.value,
                      });
                    });
                  }
                }
              }
            });
          }
        })
        .catch((error) => {
          console.error("Error fetching data:", error);
        });
    }
    fetchDataFromDatabase();
    // Function to add new data every 2 seconds
    setInterval(() => {
      const batteryData = {
        time: getCurrentUnixTime(),
        Battery_rack_Charge_power: generateNewChargeDataPoint(),
        Battery_rack_DisCharge_power: generateNewChargeDataPoint(),
        Battery_rack_current: generateNewChargeDataPoint(),
        Battery_rack_voltage: generateNewChargeDataPoint(),
        Total_Battery_Charge_Energy_of_life_cycle: generateNewChargeDataPoint(),
        Total_Battery_Discharge_Energy_of_life_cycle:
          generateNewChargeDataPoint(),
        Lowest_cell_voltage: generateNewChargeDataPoint(),
        Highest_cell_voltage: generateNewChargeDataPoint(),
        Min_cell_temperature: generateNewChargeDataPoint(),
        Max_cell_temperature: generateNewChargeDataPoint(),
        ID_of_lowest_cell_voltage: generateNewChargeDataPoint(),
        ID_of_highest_cell_voltage: generateNewChargeDataPoint(),
        ID_of_min_cell_temperature: generateNewChargeDataPoint(),
        ID_of_max_cell_temperature: generateNewChargeDataPoint(),
        SoC_of_rack: generateNewChargeDataPoint(),
        SoH_of_rack: generateNewChargeDataPoint(),
        DC_insulation_resistance: generateNewChargeDataPoint(),
      };
      // Save data to the database
      //saveBatteryDataToDatabase(batteryData);

      // Update both series with new data points only if they are visible
      fetchChangedDataFromDatabase();
    }, 2000);

    // Function to toggle visibility of a series
    function toggleSeriesVisibility(series, isVisible, legendItem, data) {
      if (isVisible) {
        series.setData(data); // Show series data
        legendItem.classList.remove("disabled"); // Remove disabled class
      } else {
        series.setData([]); // Hide series data
        legendItem.classList.add("disabled"); // Add disabled class
      }
    }
    document
      .getElementById("bat_get_time")
      .addEventListener("click", function () {
        const datetimeInput = document.getElementById("datetimeInput").value;

        if (datetimeInput) {
          const selectedTime = new Date(datetimeInput);
          const unixTime = Math.floor(selectedTime.getTime() / 1000);
          console.log("Thời gian đã:", datetimeInput);
          chart.timeScale().setVisibleRange({
            from: unixTime,
            to: unixTime + 3600,
          });
        } else {
          console.log("Vui lòng chọn thời gian.");
        }
      });
    // Ensure chart resizes with the window
    window.addEventListener("resize", () => {
      chart.resize(chartElement.clientWidth, 500);
    });
  </script>
</body>

                                                                    <div class="g2-tooltip" style="position:absolute;visibility:hidden;z-index:8;transition:left 0.4s cubic-bezier(0.23, 1, 0.32, 1),
                  top 0.4s cubic-bezier(0.23, 1, 0.32, 1);background-color:rgb(255, 255, 255);box-shadow:rgb(174, 174, 174) 0px 0px 10px;border-radius:3px;color:rgb(89, 89, 89);font-size:12px;font-family:'Segoe UI', Roboto, 'Helvetica Neue', Arial,
                  'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
                  'Segoe UI Symbol', 'Noto Color Emoji';line-height:12px;padding:0px 12px;opacity:0.95;pointer-events:none;left:1060px;top:0px;">
                                                                        <div class="g2-tooltip-title" style="margin-bottom:12px;margin-top:12px;"><span> 2024-10-11 07:38:58 </span></div>
                                                                        <ul class="g2-tooltip-list" style="margin:0px;list-style-type:none;padding:0px;">
                                                                            <li class="g2-tooltip-list-item" data-index="" style="list-style-type:none;padding:0px;margin:12px 0px;"><span class="g2-tooltip-marker" style="background:rgb(91, 143, 249);width:8px;height:8px;border-radius:50%;display:inline-block;margin-right:8px;"></span><span class="g2-tooltip-name">Battery rack Charge power (kW)</span>: <span class="g2-tooltip-value" style="display:inline-block;float:right;margin-left:30px;">0</span></li>
                                                                            <li class="g2-tooltip-list-item" data-index="" style="list-style-type:none;padding:0px;margin:12px 0px;"><span class="g2-tooltip-marker" style="background:rgb(90, 216, 166);width:8px;height:8px;border-radius:50%;display:inline-block;margin-right:8px;"></span><span class="g2-tooltip-name">Battery rack DisCharge power (kW)</span>: <span class="g2-tooltip-value" style="display:inline-block;float:right;margin-left:30px;">0</span></li>
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div><br>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
            <div id="success-message" class="success-message"><span>Thành công!</span></div>
        </div>
    </div>
    <script src="../assets/js/jquery.min.js"></script>
    <script src="../assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="../assets/js/antd.min.js"></script>
    <script src="../assets/js/g2plot.min.js"></script>
    <script src="../assets/js/lightweight-charts.standalone.production.js"></script>
    <script src="../assets/js/helper.js"></script>
    <script src="../assets/js/scriptControlTab.js"></script>
    <script src="../assets/js/scriptReportTab.js"></script>
</body>

</html>